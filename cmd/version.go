// Code generated by go generate; DO NOT EDIT.

package cmd

import (
	"encoding/json"
	"fmt"

	"github.com/spf13/cobra"
)

var (
	jsonOutput bool
)

// Version information embedded at build time
const (
	// Version is the application version (from git tag or VERSION env)
	Version = "v0.1.0"

	// GitHash is the git commit hash
	GitHash = "0c6990c83dda3c3564c797a9c13da802fef78b22"

	// BuildTime is when the binary was built
	BuildTime = "2026-01-05T15:40:21Z"

	// BuildHash is a unique hash for this build
	BuildHash = "b8f7ed56dd283ebed01c1de5908f19cfae85d9a591b959f55a5596e4ab38c3d0"

	// GoVersion is the Go version used to build
	GoVersion = "go1.25.5"

	// GOOS is the target operating system
	GOOS = "windows"

	// GOARCH is the target architecture
	GOARCH = "amd64"
)

// VersionInfo contains all version metadata.
type VersionInfo struct {
	GoVersion string `json:"go_version"`
	GoOS      string `json:"goos"`
	GoArch    string `json:"goarch"`
	Version   string `json:"version"`
	GitHash   string `json:"git_hash"`
	BuildTime string `json:"build_time"`
	BuildHash string `json:"build_hash"`
}

// versionCmd represents the version command.
var versionCmd = &cobra.Command{
	Use:   "version",
	Short: "Print version information",
	Long: `Display version information including:
	- Application version
	- Git commit hash
	- Build time
	- Build hash
	- Go version
	- OS/Architecture`,
	Run: runVersion,
}

func init() {
	rootCmd.AddCommand(versionCmd)
	versionCmd.Flags().BoolVarP(&jsonOutput, "json", "j", false, "Output version info as JSON")
}

func runVersion(cmd *cobra.Command, args []string) {
	if jsonOutput {
		fmt.Println(GetVersionJSON())
	} else {
		printVersion()
	}
}

// GetVersionInfo returns the version information.
func GetVersionInfo() *VersionInfo {
	return &VersionInfo{
		GoVersion: GoVersion,
		GoOS:      GOOS,
		GoArch:    GOARCH,
		Version:   Version,
		GitHash:   GitHash,
		BuildTime: BuildTime,
		BuildHash: BuildHash,
	}
}

// GetVersionJSON returns the version information as a JSON string.
func GetVersionJSON() string {
	data, err := json.MarshalIndent(GetVersionInfo(), "", "  ")
	if err != nil {
		return "{}"
	}

	return string(data)
}

func printVersion() {
	fmt.Printf("Version:    %s\n", Version)
	fmt.Printf("Git Hash:   %s\n", GitHash)
	fmt.Printf("Build Time: %s\n", BuildTime)
	fmt.Printf("Build Hash: %s\n", BuildHash)
	fmt.Printf("Go Version: %s\n", GoVersion)
	fmt.Printf("OS/Arch:    %s/%s\n", GOOS, GOARCH)
}
