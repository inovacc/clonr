// Code generated by go generate; DO NOT EDIT.

package cmd

import (
	"encoding/json"
	"fmt"

	"github.com/spf13/cobra"
)

// Build information embedded at generation time
const (
	// Version is the application version
	Version = "v0.2.0"

	// GitHash is the git commit hash
	GitHash = "0fa8160ce16149188f98d1c6398189872a9e4bb0"

	// BuildTime is when the binary was built
	BuildTime = "2026-01-30T02:06:49Z"

	// BuildHash is a unique hash for this build
	BuildHash = "8171594c931402eb4c403948d133b2b7846528e915811b510d696ae17c0e27f0"

	// GoVersion is the Go version used to build
	GoVersion = "go1.25.6"

	// GOOS is the target operating system
	GOOS = "windows"

	// GOARCH is the target architecture
	GOARCH = "amd64"
)

// VersionInfo contains all version metadata.
type VersionInfo struct {
	GoVersion string `json:"go_version"`
	GoOS      string `json:"goos"`
	GoArch    string `json:"goarch"`
	Version   string `json:"version"`
	GitHash   string `json:"git_hash"`
	BuildTime string `json:"build_time"`
	BuildHash string `json:"build_hash"`
}

// versionCmd represents the version command.
var versionCmd = &cobra.Command{
	Use:   "version",
	Short: "Print version information",
	Long: `Display version information including:
	- Application version
	- Git commit hash
	- Build time
	- Build hash
	- Go version
	- OS/Architecture`,
	Run: func(cmd *cobra.Command, args []string) {
		json, _ := cmd.Flags().GetBool("json")
		if json {
			fmt.Println(GetVersionJSON())
		} else {
			printVersion()
		}
	},
}

func init() {
	rootCmd.AddCommand(versionCmd)
	versionCmd.Flags().BoolP("json", "j", false, "Output version info as JSON")
}

// GetVersionInfo returns the version information.
func GetVersionInfo() *VersionInfo {
	return &VersionInfo{
		GoVersion: GoVersion,
		GoOS:      GOOS,
		GoArch:    GOARCH,
		Version:   Version,
		GitHash:   GitHash,
		BuildTime: BuildTime,
		BuildHash: BuildHash,
	}
}

// GetVersionJSON returns the version information as a JSON string.
func GetVersionJSON() string {
	data, err := json.MarshalIndent(GetVersionInfo(), "", "  ")
	if err != nil {
		return "{}"
	}

	return string(data)
}

func printVersion() {
	fmt.Printf("Version:    %s\n", Version)
	fmt.Printf("Git Hash:   %s\n", GitHash)
	fmt.Printf("Build Time: %s\n", BuildTime)
	fmt.Printf("Build Hash: %s\n", BuildHash)
	fmt.Printf("Go Version: %s\n", GoVersion)
	fmt.Printf("OS/Arch:    %s/%s\n", GOOS, GOARCH)
}

